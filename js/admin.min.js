/**
 * Shows or hides settings depending on others.
 */

function disableInputs() {
  if (document.getElementById("global_color_primary").value === "gray") {
    document.getElementById("setting-linksunderline-recommended").style.display = "inline";
  } else {
    document.getElementById("setting-linksunderline-recommended").style.display = "none";
  }

  if (document.getElementById("global_js").checked || document.getElementById("content_images_wide").checked) {
    document.getElementById("origine-mini-message-js").style.display = "block";
  } else {
    document.getElementById("origine-mini-message-js").style.display = "none";
  }

  if (document.getElementById("global_js").checked) {
    document.getElementById("hash-searchform").style.display         = "block";
    document.getElementById("hash-trackbackurl").style.display       = "block";
  } else {
    document.getElementById("hash-searchform").style.display         = "none";
    document.getElementById("hash-trackbackurl").style.display       = "none";
  }

  if (document.getElementById("content_images_wide").checked) {
    document.getElementById("hash-imagewide").style.display          = "block";
  } else {
    document.getElementById("hash-imagewide").style.display          = "none";
  }

  if (document.getElementById("content_post_list_time").checked || document.getElementById("content_post_time").checked) {
    document.getElementById("content_separator-input").style.display       = "block";
    document.getElementById("content_separator-description").style.display = "block";
    document.getElementById("section-content-other").style.display         = "block";
  } else {
    document.getElementById("content_separator-input").style.display       = "none";
    document.getElementById("content_separator-description").style.display = "none";
    document.getElementById("section-content-other").style.display         = "none";
  }

  if (document.getElementById("widgets_nav_position").value === "disabled") {
    document.getElementById("widgets_search_form-input").style.display       = "none";
    document.getElementById("widgets_search_form-description").style.display = "none";
  } else {
    document.getElementById("widgets_search_form-input").style.display       = "block";
    document.getElementById("widgets_search_form-description").style.display = "block";
  }

  if (!document.getElementById("footer_enabled").checked) {
    document.getElementById("footer_credits-input").style.display               = "none";
    document.getElementById("footer_credits-description").style.display         = "none";
    document.getElementById("section-footer-social-links").style.display        = "none";
    document.getElementById("footer_social_links_diaspora-input").style.display = "none";
    document.getElementById("footer_social_links_discord-input").style.display  = "none";
    document.getElementById("footer_social_links_facebook-input").style.display = "none";
    document.getElementById("footer_social_links_github-input").style.display   = "none";
    document.getElementById("footer_social_links_mastodon-input").style.display = "none";
    document.getElementById("footer_social_links_signal-input").style.display   = "none";
    document.getElementById("footer_social_links_tiktok-input").style.display   = "none";
    document.getElementById("footer_social_links_twitter-input").style.display  = "none";
    document.getElementById("footer_social_links_whatsapp-input").style.display = "none";
  } else {
    document.getElementById("footer_credits-input").style.display               = "block";
    document.getElementById("footer_credits-description").style.display         = "block";
    document.getElementById("section-footer-social-links").style.display        = "block";
    document.getElementById("footer_social_links_diaspora-input").style.display = "block";
    document.getElementById("footer_social_links_discord-input").style.display  = "block";
    document.getElementById("footer_social_links_facebook-input").style.display = "block";
    document.getElementById("footer_social_links_github-input").style.display   = "block";
    document.getElementById("footer_social_links_mastodon-input").style.display = "block";
    document.getElementById("footer_social_links_signal-input").style.display   = "block";
    document.getElementById("footer_social_links_tiktok-input").style.display   = "block";
    document.getElementById("footer_social_links_twitter-input").style.display  = "block";
    document.getElementById("footer_social_links_whatsapp-input").style.display = "block";
  }
}

window.onload = function() {
  disableInputs();
};

window.onchange = function() {
  disableInputs();
};

/**
 * Image Uploader
 */
$(function () {
  // user image
  $('#freelancer_user_image_selector').on('click', function (e) {
    window.open(
      'media.php?plugin_id=admin.blog.theme&popup=1&select=1',
      'dc_popup',
      'alwaysRaised=yes,dependent=yes,toolbar=yes,height=500,width=760,menubar=no,resizable=yes,scrollbars=yes,status=no',
    );
    e.preventDefault();
    return false;
  });

  $('#freelancer_user_image_reset').on('click', function (e) {
    const url = `${$('input[name="theme-url"]').val()}/img/home.png`;
    $('#freelancer_user_image').val(url);
    $('#freelancer_user_image_src').attr('src', url);
  });

  $('#freelancer_user_image').on('change', function (e) {
    const url = `${$('input[name="theme-url"]').val()}/img/home.png`;
    if ($('#freelancer_user_image').val() == url) {
      $('#freelancer_user_image_src').attr('src', url);
    } else if ($('#freelancer_user_image').val() == '') {
      return;
    } else {
      const src = $('#freelancer_user_image').val();
      $('#freelancer_user_image_src').attr('src', src);
    }
  });
});
