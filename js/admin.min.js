function setStyle(e,t){for(var o of e=Array.isArray(e)?e:[e]){var n=o+"-input",o=o+"-description";document.getElementById(n)&&(document.getElementById(n).style.display=t),document.getElementById(o)&&(document.getElementById(o).style.display=t)}}function socialSites(){return["bluesky","diaspora","email","facebook","instagram","mastodon","matrix","phone","signal","sms","youtube","whatsapp","x","other"]}function toggleOtherReactionsSettings(e){document.getElementById("social_"+e).value&&"disabled"!==document.getElementById("reactions_other").value?setStyle("reactions_other_"+e,"block"):setStyle("reactions_other_"+e,"none")}function toggleFooterSocialSettings(e){document.getElementById("social_"+e).value&&document.getElementById("footer_enabled").checked?setStyle("footer_social_"+e,"block"):setStyle("footer_social_"+e,"none")}function disableInputs(){"custom"===document.getElementById("global_color_primary").value?(document.getElementById("section-global-colors-light").style.display="block",setStyle(["global_color_text_custom","global_color_text_secondary_custom","global_color_primary_custom","global_color_primary_amplified_custom","global_color_input_custom","global_color_border_custom","global_color_background_custom","global_color_text_dark_custom","global_color_text_secondary_dark_custom","global_color_primary_dark_custom","global_color_primary_dark_amplified_custom","global_color_input_dark_custom","global_color_border_dark_custom","global_color_background_dark_custom"],document.getElementById("section-global-colors-dark").style.display="block")):(document.getElementById("section-global-colors-light").style.display="none",setStyle(["global_color_text_custom","global_color_text_secondary_custom","global_color_primary_custom","global_color_primary_amplified_custom","global_color_input_custom","global_color_border_custom","global_color_background_custom","global_color_text_dark_custom","global_color_text_secondary_dark_custom","global_color_primary_dark_custom","global_color_primary_dark_amplified_custom","global_color_input_dark_custom","global_color_border_dark_custom","global_color_background_dark_custom"],document.getElementById("section-global-colors-dark").style.display="none")),document.getElementById("header_image-preview")?(setStyle(["header_image_as_title","header_image_position","header_image_description"],"block"),setStyle("header_image","none"),document.getElementById("header_image-delete").style.display="block",document.getElementById("header_image-retina")&&"none"!==document.getElementById("header_image-retina").style.display?setStyle("header_image2x","none"):setStyle("header_image2x","block")):(setStyle(["header_image2x","header_image_as_title","header_image_position","header_image_description"],"none"),setStyle("header_image","block"),document.getElementById("header_image-delete").style.display="none"),document.getElementById("header_image_as_title").checked?setStyle(["header_image_position","header_image_description"],"none"):setStyle(["header_image_position","header_image_description"],"block"),"content"!==document.getElementById("content_postlist_type").value?setStyle(["content_postlist_altcolor","content_postlist_thumbnail"],"block"):setStyle(["content_postlist_altcolor","content_postlist_thumbnail"],"none"),"disabled"!==document.getElementById("reactions_other").value?setStyle("reactions_other_email","block"):setStyle("reactions_other_email","none"),document.getElementById("footer_enabled").checked?setStyle(["footer_align","footer_feed","footer_credits"],"block"):setStyle(["footer_align","footer_feed","footer_credits"],"none");var e,t=!1;for(e of socialSites())document.getElementById("social_"+e).value&&document.getElementById("footer_enabled").checked&&(t=!0),toggleOtherReactionsSettings(e),toggleFooterSocialSettings(e);document.getElementById("section-footer-social").style.display=!0===t?"block":"none"}function changeImage(e){var t,e=e.files[0];e&&((t=new FileReader).readAsDataURL(e),t.addEventListener("load",function(){var e,t;document.getElementById("header_image-preview")?(document.getElementById("header_image-src").src=this.result,"none"===document.getElementById("header_image-preview").style.display&&(document.getElementById("header_image-preview").style.display="block")):((e=document.createElement("p")).setAttribute("id","header_image-preview"),(t=document.createElement("img")).setAttribute("id","header_image-src"),t.src=this.result,document.getElementById("header_image-description").after("",e),e.appendChild(t)),document.getElementById("header_image-delete-action").value="false",setStyle(["header_image2x","header_image_as_title","header_image_position","header_image_description"],"block"),setStyle("header_image","none"),document.getElementById("header_image-delete").style.display="block"}))}function fontsPreview(){var e={system:"system-ui, ui-sans-serif, sans-serif","sans-serif":"ui-sans-serif, sans-serif",serif:"ui-serif, serif",transitional:'Charter, "Bitstream Charter", "Sitka Text", Cambria, serif',"old-style":'"Iowan Old Style", "Palatino Linotype", "URW Palladio L", P052, serif',garamond:'Garamond, Baskerville, "Baskerville Old Face", "Hoefler Text", "Times New Roman", serif',humanist:'Seravek, "Gill Sans Nova", Ubuntu, Calibri, "DejaVu Sans", source-sans-pro, sans-serif',"geometric-humanist":'Avenir, Montserrat, Corbel, "URW Gothic", source-sans-pro, sans-serif',"classical-humanist":'Optima, Candara, "Noto Sans", source-sans-pro, sans-serif',"neo-grotesque":'Inter, Roboto, "Helvetica Neue", "Arial Nova", "Nimbus Sans", Arial, sans-serif',"monospace-slab-serif":'"Nimbus Mono PS", "Courier New", monospace',"monospace-code":'ui-monospace, "Cascadia Code", "Source Code Pro", Menlo, Consolas, "DejaVu Sans Mono", monospace',industrial:'Bahnschrift, "DIN Alternate", "Franklin Gothic Medium", "Nimbus Sans Narrow", sans-serif-condensed, sans-serif',"rounded-sans":'ui-rounded, "Hiragino Maru Gothic ProN", Quicksand, Comfortaa, Manjari, "Arial Rounded MT", "Arial Rounded MT Bold", Calibri, source-sans-pro, sans-serif',"slab-serif":'Rockwell, "Rockwell Nova", "Roboto Slab", "DejaVu Serif", "Sitka Small", serif',antique:'Superclarendon, "Bookman Old Style", "URW Bookman", "URW Bookman L", "Georgia Pro", Georgia, serif',didone:'Didot, "Bodoni MT", "Noto Serif Display", "URW Palladio L", P052, Sylfaen, serif',handwritten:'"Segoe Print", "Bradley Hand", Chilanka, TSCu_Comic, casual, cursive'};e[document.getElementById("global_font_family").value]&&(document.getElementById("odyssey-config-global-font-preview").style.fontFamily=e[document.getElementById("global_font_family").value]),"same"!==document.getElementById("content_text_font").value?(document.getElementById("odyssey-config-content-font-preview").style.display="block",e[document.getElementById("content_text_font").value]&&(document.getElementById("odyssey-config-content-font-preview").style.fontFamily=e[document.getElementById("content_text_font").value])):document.getElementById("odyssey-config-content-font-preview").style.display="none"}function changeColorInput(e,t){var o=document.getElementById(e).value,n=document.getElementById(e+"-text").value;colorDefault=document.getElementById(e+"-default-value").value,o!==n&&"default"!==t&&("picker"===t?document.getElementById(e+"-text").value=o:"text"===t&&(document.getElementById(e).value=""!==n?n:colorDefault)),"default"===t&&(document.getElementById(e).value=colorDefault,document.getElementById(e+"-text").value=colorDefault)}function pageWidthInputDefault(){"em"===document.getElementById("global_unit").value?(document.getElementById("global_page_width_value").max=document.getElementById("page_width_em_max_default").value,document.getElementById("global_page_width_value").min=document.getElementById("page_width_em_min_default").value,document.getElementById("global_page_width_value").step=document.getElementById("page_width_em_step_default").value):"px"===document.getElementById("global_unit").value&&(document.getElementById("global_page_width_value").max=document.getElementById("page_width_px_max_default").value,document.getElementById("global_page_width_value").min=document.getElementById("page_width_px_min_default").value,document.getElementById("global_page_width_value").step=document.getElementById("page_width_px_step_default").value)}function pageWidthUnitChange(e,t){let o,n;"em"===t?(o=(16*parseInt(e)).toString(),n="px",document.getElementById("global_page_width_value").value=o,document.getElementById("global_page_width_value-output-value").innerHTML=o,document.getElementById("global_page_width_value-output-unit").innerHTML=n):"px"===t&&(o=parseInt(parseInt(e)/16).toString(),n="em",document.getElementById("global_page_width_value").value=o,document.getElementById("global_page_width_value-output-value").innerHTML=o,document.getElementById("global_page_width_value-output-unit").innerHTML=n)}window.onload=function(){disableInputs(),fontsPreview(),window.onchange=function(){disableInputs(),fontsPreview()},window.oninput=function(){disableInputs()};for(var e=document.querySelectorAll("input[type=range]"),t=0;t<e.length;t++)"global_page_width_value"!==e[t].id&&(e[t].oninput=function(e){console.log(e.target.value),document.getElementById(e.target.id+"-output-value").innerHTML=e.target.value});pageWidthInputDefault(),document.getElementById("global_page_width_value").oninput=function(){document.getElementById("global_page_width_value-output-value").innerHTML=document.getElementById("global_page_width_value").value};let o=document.getElementById("global_page_width_value").value,n=document.getElementById("global_unit").value;document.getElementById("global_page_width_value").onchange=function(){o=document.getElementById("global_page_width_value").value},document.getElementById("global_unit").onchange=function(){pageWidthInputDefault(),pageWidthUnitChange(o,n),o=document.getElementById("global_page_width_value").value,n=document.getElementById("global_unit").value};for(var l=document.getElementsByClassName("odyssey-color-setting"),l=(Array.prototype.forEach.call(l,function(e){let t=e.getAttribute("id"),o,n,l;"-input"===t.substr(t.length-6)&&(n=(o=t.substr(0,t.length-6))+"-text",l=o+"-default-button",document.getElementById(o).oninput=function(){changeColorInput(o,"picker")},document.getElementById(n).oninput=function(){changeColorInput(o,"text")},document.getElementById(l).onclick=function(){changeColorInput(o,"default")})}),document.getElementById("header_image").onchange=function(){changeImage(this),disableInputs()},document.getElementById("header_image-delete")&&(document.getElementById("header_image-delete-button").onclick=function(){document.getElementById("header_image-preview").style.display="none",document.getElementById("header_image-delete").style.display="none",document.getElementById("header_image-retina")&&(document.getElementById("header_image-retina").style.display="none"),setStyle(["header_image2x","header_image_as_title","header_image_position","header_image_description"],"none"),setStyle("header_image","block"),document.getElementById("header_image").value="",document.getElementById("header_image_description").value="",document.getElementById("header_image-delete-action").value="true"}),document.getElementById("odyssey-reset")),a=(l&&l.addEventListener("click",function(e){confirm(document.getElementById("reset_warning").value)||e.preventDefault()}),document.getElementsByClassName("odyssey-backups-restore")),t=0;t<a.length;t++)a[t].addEventListener("click",function(e){confirm(document.getElementById("config_restore_warning").value)||e.preventDefault()});for(var l=document.getElementById("odyssey-backups-remove-all"),d=(l&&l.addEventListener("click",function(e){confirm(document.getElementById("config_remove_all_warning").value)||e.preventDefault()}),document.getElementsByClassName("odyssey-backups-remove")),t=0;t<d.length;t++)d[t].addEventListener("click",function(e){confirm(document.getElementById("config_remove_warning").value)||e.preventDefault()})};
