function getMeta(e,t){var a=new Image;a.src=e,a.addEventListener("load",function(){t(this.width,this.height)})}function imageWide(){var e=parseInt(document.getElementById("script-theme").getAttribute("data-pagewidth")),t=0,a=0,l=0;let i=document.createElement("div");i.style.width="1rem",i.style.display="none",document.body.append(i);var r=window.getComputedStyle(i).getPropertyValue("width").match(/\d+/);i.remove(),r&&r.length>=1&&(l=parseInt(r[0])),l>0&&(t=e*l,a=(e+10)*l);for(var s=document.getElementsByTagName("article")[0].getElementsByTagName("img"),n=0;n<s.length;){let m=s[n];getMeta(m.src,function(e,l){let i=e,r=l,s="";i>t&&i>r&&(i>a&&(r=parseInt(a*r/i),i=a),s="display:block;margin-left:50%;transform:translateX(-50%);max-width:95vw;",m.setAttribute("style",s),i&&m.setAttribute("width",i),r&&m.setAttribute("height",r))}),n++}}window.onload=function(){if(document.getElementsByClassName("search-form-submit")[0]){var e=new URL(document.location).searchParams.get("q");""!==e&&(document.getElementsByClassName("search-form-submit")[0].disabled=!0),document.getElementsByClassName("search-form")[0].oninput=function(){document.getElementsByClassName("search-form-field")[0].value&&document.getElementsByClassName("search-form-field")[0].value!==e?document.getElementsByClassName("search-form-submit")[0].disabled=!1:document.getElementsByClassName("search-form-submit")[0].disabled=!0}}document.getElementById("trackback-url")&&(document.getElementById("trackback-url").onclick=function(){window.location.protocol,window.location.host;var e,t=document.getElementById("trackback-url").innerHTML;try{e=new URL(t).href}catch(a){return!1}!1!==e.href&&navigator.clipboard.writeText(e).then(()=>{document.getElementById("trackback-url-copied").style.display="inline"},()=>{document.getElementById("trackback-url-copied").style.display="none"})})},document.getElementById("script-theme").getAttribute("data-pagewidth")&&document.getElementsByTagName("article")[0]&&(window.addEventListener("load",imageWide),window.addEventListener("resize",imageWide));
